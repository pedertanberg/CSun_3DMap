import{nN as v,ep as x,s as w,r as U,bU as D,bW as b,nO as $,nP as F,nQ as M,nR as g,nS as O,nT as P,nU as j,nV as W,nW as Q,nX as N,nY as S,nZ as V}from"./index.f489a479.js";function k(e,t,a,n){return e.name?e.styleName&&e.styleName==="Esri2DPointSymbolsStyle"?Y(e,t,n):v(e,t,n).then(r=>X(x(r),e.name,t,a,n)):Promise.reject(new w("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function X(e,t,a,n,r){var f,d,h;const u=e.data,m=a&&U(a.portal)?a.portal:D.getDefault(),c={portal:m,url:b(e.baseUrl),origin:"portal-item"},o=u.items.find(s=>s.name===t);if(!o){const s=`The symbol name '${t}' could not be found`;return Promise.reject(new w("symbolstyleutils:symbol-name-not-found",s,{symbolName:t}))}let i=$(F(o,n),c),y=(d=(f=o.thumbnail)==null?void 0:f.href)!=null?d:null;const p=o.thumbnail&&o.thumbnail.imageData;M()&&(i=(h=g(i))!=null?h:"",y=g(y));const E={portal:m,url:b(O(i)),origin:"portal-item"};return P(i,r).then(s=>{const R=n==="cimRef"?j(s.data):s.data,l=W(R,E);if(l&&Q(l)){if(y){const T=$(y,c);l.thumbnail=new N({url:T})}else p&&(l.thumbnail=new N({url:`data:image/png;base64,${p}`}));e.styleUrl?l.styleOrigin=new S({portal:a.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(l.styleOrigin=new S({portal:a.portal,styleName:e.styleName,name:t}))}return l})}function Y(e,t,a){const n=V.replace(/\{SymbolName\}/gi,e.name),r=U(t.portal)?t.portal:D.getDefault();return P(n,a).then(u=>{const m=j(u.data);return W(m,{portal:r,url:b(O(n)),origin:"portal-item"})})}export{X as fetchSymbolFromStyle,k as resolveWebStyleSymbol};
