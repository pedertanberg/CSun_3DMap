import{n as f}from"./key.eb5605f7.js";import{c as I}from"./observers.2da64440.js";import{ob as y,b}from"./index.347f2ee6.js";/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.0-beta.97
 */const H=(e,t,r)=>Math.max(t,Math.min(e,r)),j=e=>{const t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.0-beta.97
 */class n{constructor(t){if(t instanceof n)return t;const[r,s]=String(t).split(".").concat("");this.value=BigInt(r+s.padEnd(n.DECIMALS,"0").slice(0,n.DECIMALS))+BigInt(n.ROUNDED&&s[n.DECIMALS]>="5"),this.isNegative=t.charAt(0)==="-"}static _divRound(t,r){return n.fromBigInt(t/r+(n.ROUNDED?t*BigInt(2)/r%BigInt(2):BigInt(0)))}static fromBigInt(t){return Object.assign(Object.create(n.prototype),{value:t})}toString(){const t=this.value.toString().replace(new RegExp("-","g"),"").padStart(n.DECIMALS+1,"0"),r=t.slice(0,-n.DECIMALS),s=t.slice(-n.DECIMALS).replace(/\.?0+$/,""),i=r.concat(s.length?"."+s:"");return`${this.isNegative?"-":""}${i}`}formatToParts(t){const r=this.value.toString().replace(new RegExp("-","g"),"").padStart(n.DECIMALS+1,"0"),s=r.slice(0,-n.DECIMALS),i=r.slice(-n.DECIMALS).replace(/\.?0+$/,""),a=t.formatToParts(BigInt(s));return this.isNegative&&a.unshift({type:"minusSign",value:c.minusSign}),i.length&&(a.push({type:"decimal",value:c.decimal}),i.split("").forEach(u=>a.push({type:"fraction",value:u}))),a}format(t){const r=this.value.toString().replace(new RegExp("-","g"),"").padStart(n.DECIMALS+1,"0"),s=r.slice(0,-n.DECIMALS),i=r.slice(-n.DECIMALS).replace(/\.?0+$/,""),a=`${this.isNegative?c.minusSign:""}${t.format(BigInt(s))}`,u=i.length?`${c.decimal}${t.format(BigInt(i))}`:"";return`${a}${u}`}add(t){return n.fromBigInt(this.value+new n(t).value)}subtract(t){return n.fromBigInt(this.value-new n(t).value)}multiply(t){return n._divRound(this.value*new n(t).value,n.SHIFT)}divide(t){return n._divRound(this.value*n.SHIFT,new n(t).value)}}n.DECIMALS=100;n.ROUNDED=!0;n.SHIFT=BigInt("1"+"0".repeat(n.DECIMALS));function h(e){return!(!e||isNaN(Number(e)))}function k(e){return!e||!C(e)?"":m(e,t=>{let r=!1;const s=t.split("").filter((i,a)=>i.match(/\./g)&&!r?(r=!0,!0):i.match(/\-/g)&&a===0?!0:f.includes(i)).reduce((i,a)=>i+a);return h(s)?new n(s).toString():""})}const O=/^([-0])0+(?=\d)/,w=/(?!^\.)\.$/,F=/(?!^-)-/g,L=/^-\b0\b\.?0*$/,G=e=>m(e,t=>{const r=t.replace(F,"").replace(w,"").replace(O,"$1");return h(r)?L.test(r)?r:new n(r).toString():t});function m(e,t){if(!e)return e;const r=e.toLowerCase().indexOf("e")+1;return r?e.replace(/[eE]*$/g,"").substring(0,r).concat(e.slice(r).replace(/[eE]/g,"")).split(/[eE]/).map((s,i)=>t(i===1?s.replace(/\./g,""):s)).join("e").replace(/^e/,"1e"):t(e)}function C(e){return f.some(t=>e.includes(t))}const o="en",d=["ar","bg","bs","ca","cs","da","de","de-CH","el",o,"en-AU","en-CA","en-GB","es","es-MX","et","fi","fr","fr-CH","he","hi","hr","hu","id","it","it-CH","ja","ko","lt","lv","mk","nb","nl","pl","pt","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"],N=["arab","arabext","bali","beng","deva","fullwide","gujr","guru","hanidec","khmr","knda","laoo","latn","limb","mlym","mong","mymr","orya","tamldec","telu","thai","tibt"],S=e=>N.includes(e),g=new Intl.NumberFormat().resolvedOptions().numberingSystem,v=g==="arab"||!S(g)?"latn":g,$=e=>S(e)?e:v;function A(e){return d.indexOf(e)>-1?e:e?(e=e.toLowerCase(),e==="nb"?"no":(e.includes("-")&&(e=e.replace(/(\w+)-(\w+)/,(t,r,s)=>`${r}-${s.toUpperCase()}`),d.includes(e)||(e=e.split("-")[0])),d.includes(e)?e:o)):o}const l=new Set;function U(e){M(e),l.size===0&&E.observe(document.documentElement,{attributes:!0,attributeFilter:["lang"],subtree:!0}),l.add(e)}function M(e){e.effectiveLocale=x(e)}function P(e){l.delete(e),l.size===0&&E.disconnect()}const E=I("mutation",e=>{e.forEach(t=>{const r=t.target;l.forEach(s=>{const i=!!(s.locale&&!s.el.lang),a=!y(r,s.el);if(i||a)return;const u=b(s.el,"[lang]");if(!u){s.effectiveLocale=o;return}const p=u.lang;s.effectiveLocale=u.hasAttribute("lang")&&p===""?o:p})})});function x(e){var t;return e.el.lang||e.locale||((t=b(e.el,"[lang]"))===null||t===void 0?void 0:t.lang)||document.documentElement.lang||o}class R{constructor(){this.delocalize=t=>this._numberFormatOptions?m(t,r=>r.trim().replace(new RegExp(`[${this._minusSign}]`,"g"),"-").replace(new RegExp(`[${this._group}]`,"g"),"").replace(new RegExp(`[${this._decimal}]`,"g"),".").replace(new RegExp(`[${this._digits.join("")}]`,"g"),this._getDigitIndex)):t,this.localize=t=>this._numberFormatOptions?m(t,r=>h(r.trim())?new n(r.trim()).format(this._numberFormatter).replace(new RegExp(`[${this._actualGroup}]`,"g"),this._group):r):t}get group(){return this._group}get decimal(){return this._decimal}get minusSign(){return this._minusSign}get digits(){return this._digits}get numberFormatter(){return this._numberFormatter}get numberFormatOptions(){return this._numberFormatOptions}set numberFormatOptions(t){if(t.locale=A(t==null?void 0:t.locale),t.numberingSystem=$(t==null?void 0:t.numberingSystem),!this._numberFormatOptions&&t.locale===o&&t.numberingSystem===v&&Object.keys(t).length===2||JSON.stringify(this._numberFormatOptions)===JSON.stringify(t))return;this._numberFormatOptions=t,this._numberFormatter=new Intl.NumberFormat(this._numberFormatOptions.locale,this._numberFormatOptions),this._digits=[...new Intl.NumberFormat(this._numberFormatOptions.locale,{useGrouping:!1,numberingSystem:this._numberFormatOptions.numberingSystem}).format(9876543210)].reverse();const r=new Map(this._digits.map((i,a)=>[i,a])),s=new Intl.NumberFormat(this._numberFormatOptions.locale).formatToParts(-123456789e-1);this._actualGroup=s.find(i=>i.type==="group").value,this._group=this._actualGroup.trim().length===0?" ":this._actualGroup,this._decimal=s.find(i=>i.type==="decimal").value,this._minusSign=s.find(i=>i.type==="minusSign").value,this._getDigitIndex=i=>r.get(i)}}const c=new R;export{j as a,H as b,U as c,P as d,v as e,h as i,c as n,k as p,G as s,M as u};
